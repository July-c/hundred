<?php// +----------------------------------------------------------------------// | Common // +----------------------------------------------------------------------// | 版权所有 2015-2020 武汉市微易科技有限公司，并保留所有权利。// +----------------------------------------------------------------------// | 网站地址: https://www.kdfu.cn// +----------------------------------------------------------------------// | 这不是一个自由软件！您只能在不用于商业目的的前提下使用本程序// +----------------------------------------------------------------------// | 不允许对程序代码以任何形式任何目的的再发布// +----------------------------------------------------------------------// | Author: 微小易    Date: 2018-12-01// +----------------------------------------------------------------------namespace app\common\library\wechat;/** * 微信小程序用户管理类 * Class WxUser * @package app\common\library\wechat */class WxUser extends WxBase{    /**     * 获取session_key     * @param $code     * @return array|mixed     */    public function sessionKey($code)    {        /**         * code 换取 session_key         * ​这是一个 HTTPS 接口，开发者服务器使用登录凭证 code 获取 session_key 和 openid。         * 其中 session_key 是对用户数据进行加密签名的密钥。为了自身应用安全，session_key 不应该在网络上传输。         */        $url = 'https://api.weixin.qq.com/sns/jscode2session';	        $result = json_decode(curl($url, [            'appid' => $this->appkey,            'secret' => $this->appSecret,            'grant_type' => 'authorization_code',            'js_code' => $code        ]), true);		        return isset($result['errcode']) ? [] : $result;    }}